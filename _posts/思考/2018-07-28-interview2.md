---
layout: post
title:  Interview Summary(DataBase)
date:   2018-07-28 19:15:10
categories:  思考
tags: 思考
keywords: interview
description: 
---

## 三范式
* 第一范式：所有属性都是不可分割的原子值
* 第二范式：要求非主属性完全依赖于主属性。所谓完全依赖是指不能存在仅依赖主关属性一部分的属性
* 第三范式：任何非主属性不依赖于其它非主属性

## 读写锁
* 读锁是共享的，多个用户可以同一时刻读取一个资源
* 写锁是排他的，同一时刻只有一个用户可以访问。

## ACID
原子性（Atomicity) 
事务必须是原子工作单元；对于其数据修改，要么全都执行，要么全都不执行。

一致性(Consistency) 
事务在完成时，必须使所有的数据都保持一致状态。只有在事物完成之后才能被所有使用者看见，保证了数据的完整性。例如从账户A转一笔钱到账户B上，如果账户A上的钱减少了，而账户B上的钱却没有增加，那么我们认为此时数据处于不一致的状态。

隔离性（Insulation） 
由并发事务所作的修改必须与任何其它并发事务所作的修改隔离。也就是说一个事务操作的数据不会被其他实物看到和操作

持久性(Durability） 
事务完成之后，它对于系统的影响是永久性的。该修改即使出现致命的系统故障也将一直保持

## 隔离级别
* 读未提交：可以读到未提交事务的数据，也就是脏读，这个隔离级别性能最好，但是安全性低，很少使用。
* 读已提交:可避免发生脏读，但是会在一个事务内，读到其它事务提交的数据，导致执行两次同样的查询，读出不同的结果，也就是不可重复读。
* 可重复读：可避免脏读、不可重复读。MySQL默认隔离级别。但是会有幻读的问题：当读取某个范围内的数据时，另一事务在范围内插入了新数据，当前事务再次读取的时候会产生幻行。
* 串行化:最高隔离级别，强制事务串行执行，给每一行数据都加锁，很少使用，除非是低并发、需要保证数据一致性才使用。

## InnoDB 和 MyISAM
* **InnoDB**：MySQL的默认存储引擎；支持事务，对于InnoDB每一条SQL语言都默认封装成事务，自动提交；并且具有崩溃自动回复特性，默认实现的隔离级别是“可重复读”，InnoDB表是基于聚簇索引建立的（基于B+数结构）。
* **MyISAM**: 不支持事务和行级锁，只能对全表加锁，崩溃无法自动恢复。
* InnoDB不支持全文索引，MyISAM支持
* InnoDB支持外键，MyISAM不支持 

## 数据类型
* 整数类型：TINYINT,SMALLINT,MEDIUMINT,INT,BIGINT

分别占1个字节、2个字节、3个字节、4个字节、8个字节

* 浮点类型：FLOAT,DOUBLE

* 字符串类型：CHAR,VERCHAR，TEXT

CHAR存储长度不可变，长度一定的字符串，比如MD5后的密码，性别等。VERCHAR是可变长度的字符串，需要多用一个（字符串短于255）或者两个（字符串长于255）额外的字节存储字符串长度。

TEXT用于存储很大的字符串。
* 时间类型：DATE

## 索引
